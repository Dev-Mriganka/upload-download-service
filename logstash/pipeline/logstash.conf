input {
  # Simple TCP input for testing
  tcp {
    port => 5001
    codec => json_lines
  }
}

filter {
  # Add service name for identification
  mutate {
    add_field => { "service.name" => "upload-download-service" }
  }
  
  # Use current timestamp
  date {
    match => ["timestamp", "ISO8601"]
    target => "@timestamp"
  }
}

output {
  # Simple stdout output for debugging
  stdout { codec => rubydebug }
  
  # Basic Elasticsearch output with minimal settings
  elasticsearch {
    hosts => ["${ELASTICSEARCH_HOST:elasticsearch}:9200"]
    index => "vaultsearch-test-%{+YYYY.MM.dd}"
    user => "elastic"
    password => "${ELASTIC_PASSWORD:changeme}"
  }
}
